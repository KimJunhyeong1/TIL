# 브라우저에 URL을 입력했을 때 일어나는 일

## https://www.naver.com

- URL 입력했을 때 url문법에 맞는지 확인하고 맞지 않다면 브라우저에 검색엔진을 사용해서 단순히 검색을 하고 문법에 맞다면 url을 파싱한다.
- 파싱된 토큰에서 프로토콜, url, 포트 정보를 얻는다
- 먼저 url정보를 ip로 변경해야 하므로 브라우저 캐시에 해당 URL에 ip정보가 있다면 그것을 이용하고 없다면 컴퓨터에 local hosts파일에 저장되어 있는지 확인한다.
- 여기에도 없다면 도메인 네임 시스템 서버에 해당 URL을 IP 주소로 요청한다.
- 최상위 root DNS 서버에 먼저 요청 없다면 root 도메인 서버가 com을 관리하는 DNS서버 주소를 알려준다.
- 다시 com DNS 서버에 해당 URL ip가 있는지 확인하고 없다면 [naver.com](http://naver.com) DNS서버 주소를 알려준다.
- 그 후 [naver.com](http://naver.com) DNS 서버에 요청하고 [www.naver.com](http://www.naver.com)  URL에 ip 주소를 얻을 수 있다.
- 네트워크 장비 라우터를 통해 해당 IP에 대한 요청이 어떤 경로를 통해 가야할지를 알려준다.
- 서버로 가는 관문인 게이트웨이에 도착
- ARP(Address Resolution Protocol) 주소결정프로토콜을 통해 IP주소를 응답을 주는 실제 서버장비 MAC주소로 반환해준다.
- 이제 IP주소, port도 알았고 우리가 보낸 요청을 응답하는 실제 서버장비 MAC주소도 알았으니 대상 서버와 통신하기 위해 TCP 연결을 시도한다.
- 연결을 위해 클라이언트와 서버가 3 way handshake를 한다.
- 우리는 보통 패킷이 암호화 되지 않은 http 프로토콜이 아니라 주고받는 패킷이 암호화된 https 프로토콜을 사용하므로 평문 tcp 통신을 암호화 통신으로 바꾸기 위해 tls 4 way핸드쉐이크를 시작한다.
- 연결 성립이 세션이 열렸으니 클라이언트는 http get요청을 통해 해당 페이지에 html, css, javascript, 파비콘, 이미지 등 페이지를 그리는데 필요한 자원들을 달라고 요청한다.
- 서버도 http 프로토콜을 이용해 페이로드에 자원을 담아서 응답을 한다.
- 브라우저는 받은 자원을 이용해서 파싱 후 페이지가 사용자에게 보여지도록 렌더링 및 페인팅한다.
